/* Inspire Tree DOM
 * @version 2.0.0
 * https://github.com/helion3/inspire-tree-dom
 * @copyright Copyright 2015 Helion3, and other contributors
 * @license Licensed under MIT
 *          see https://github.com/helion3/inspire-tree-dom/blob/master/LICENSE
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("lodash"),require("inspire-tree")):"function"==typeof define&&define.amd?define(["lodash","inspire-tree"],t):e.InspireTreeDOM=t(e._,e.InspireTree)}(this,function(e,t){"use strict";function n(e,t){return t={exports:{}},e(t,t.exports),t.exports}function o(){return{text:"New Node",itree:{state:{editing:!0,focused:!0}}}}function i(t,n){var o=n.dirty||!1;return o||e.each(Object.keys(n),function(e){if("dirty"!==e&&n[e]!==t[e])return o=!0,!1}),o}t="default"in t?t.default:t;var r=n(function(e,t){function n(e){return t.isArray(e)?e:e?[e]:e}function o(e){return!p(e.prototype)&&!p(e.prototype.render)}function i(e){var t=typeof e;return"string"===t||"number"===t}function r(e){return p(e)||u(e)}function l(e){return u(e)||!1===e||c(e)||p(e)}function s(e){return"function"==typeof e}function d(e){return"string"==typeof e}function a(e){return"number"==typeof e}function u(e){return null===e}function c(e){return!0===e}function p(e){return void 0===e}function f(e){return"object"==typeof e}function h(e){throw e||(e=t.ERROR_MSG),new Error("Inferno Error: "+e)}function m(e){console.warn(e)}function v(e,t){var n={};if(e)for(var o in e)n[o]=e[o];if(t)for(var o in t)n[o]=t[o];return n}function g(){this.listeners=[]}Object.defineProperty(t,"__esModule",{value:!0}),t.NO_OP="$NO_OP",t.ERROR_MSG="a runtime error occured! Use Inferno in development environment to find the error.",t.isBrowser=!("undefined"==typeof window||!window.document),t.toArray=n,t.isArray=Array.isArray,t.isStatefulComponent=o,t.isStringOrNumber=i,t.isNullOrUndef=r,t.isInvalid=l,t.isFunction=s,t.isString=d,t.isNumber=a,t.isNull=u,t.isTrue=c,t.isUndefined=p,t.isObject=f,t.throwError=h,t.warning=m,t.combineFrom=v,t.Lifecycle=g,g.prototype.addListener=function(e){this.listeners.push(e)},g.prototype.trigger=function(){for(var e,t=this.listeners;e=t.shift();)e()}}),l=n(function(e){e.exports=r,e.exports.default=e.exports}),s=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.options={afterMount:null,afterRender:null,afterUpdate:null,beforeRender:null,beforeUnmount:null,createVNode:null,findDOMNodeEnabled:!1,recyclingEnabled:!1,roots:[]}}),d=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.xlinkNS="http://www.w3.org/1999/xlink",t.xmlNS="http://www.w3.org/XML/1998/namespace",t.svgNS="http://www.w3.org/2000/svg",t.strictProps=new Set,t.strictProps.add("volume"),t.strictProps.add("defaultChecked"),t.booleanProps=new Set,t.booleanProps.add("muted"),t.booleanProps.add("scoped"),t.booleanProps.add("loop"),t.booleanProps.add("open"),t.booleanProps.add("checked"),t.booleanProps.add("default"),t.booleanProps.add("capture"),t.booleanProps.add("disabled"),t.booleanProps.add("readOnly"),t.booleanProps.add("required"),t.booleanProps.add("autoplay"),t.booleanProps.add("controls"),t.booleanProps.add("seamless"),t.booleanProps.add("reversed"),t.booleanProps.add("allowfullscreen"),t.booleanProps.add("novalidate"),t.booleanProps.add("hidden"),t.booleanProps.add("autoFocus"),t.namespaces=new Map,t.namespaces.set("xlink:href",t.xlinkNS),t.namespaces.set("xlink:arcrole",t.xlinkNS),t.namespaces.set("xlink:actuate",t.xlinkNS),t.namespaces.set("xlink:show",t.xlinkNS),t.namespaces.set("xlink:role",t.xlinkNS),t.namespaces.set("xlink:title",t.xlinkNS),t.namespaces.set("xlink:type",t.xlinkNS),t.namespaces.set("xml:base",t.xmlNS),t.namespaces.set("xml:lang",t.xmlNS),t.namespaces.set("xml:space",t.xmlNS),t.isUnitlessNumber=new Set,t.isUnitlessNumber.add("animationIterationCount"),t.isUnitlessNumber.add("borderImageOutset"),t.isUnitlessNumber.add("borderImageSlice"),t.isUnitlessNumber.add("borderImageWidth"),t.isUnitlessNumber.add("boxFlex"),t.isUnitlessNumber.add("boxFlexGroup"),t.isUnitlessNumber.add("boxOrdinalGroup"),t.isUnitlessNumber.add("columnCount"),t.isUnitlessNumber.add("flex"),t.isUnitlessNumber.add("flexGrow"),t.isUnitlessNumber.add("flexPositive"),t.isUnitlessNumber.add("flexShrink"),t.isUnitlessNumber.add("flexNegative"),t.isUnitlessNumber.add("flexOrder"),t.isUnitlessNumber.add("gridRow"),t.isUnitlessNumber.add("gridColumn"),t.isUnitlessNumber.add("fontWeight"),t.isUnitlessNumber.add("lineClamp"),t.isUnitlessNumber.add("lineHeight"),t.isUnitlessNumber.add("opacity"),t.isUnitlessNumber.add("order"),t.isUnitlessNumber.add("orphans"),t.isUnitlessNumber.add("tabSize"),t.isUnitlessNumber.add("widows"),t.isUnitlessNumber.add("zIndex"),t.isUnitlessNumber.add("zoom"),t.isUnitlessNumber.add("fillOpacity"),t.isUnitlessNumber.add("floodOpacity"),t.isUnitlessNumber.add("stopOpacity"),t.isUnitlessNumber.add("strokeDasharray"),t.isUnitlessNumber.add("strokeDashoffset"),t.isUnitlessNumber.add("strokeMiterlimit"),t.isUnitlessNumber.add("strokeOpacity"),t.isUnitlessNumber.add("strokeWidth"),t.skipProps=new Set,t.skipProps.add("children"),t.skipProps.add("childrenType"),t.skipProps.add("defaultValue"),t.skipProps.add("ref"),t.skipProps.add("key"),t.skipProps.add("selected"),t.skipProps.add("checked"),t.skipProps.add("multiple"),t.delegatedEvents=new Set,t.delegatedEvents.add("onClick"),t.delegatedEvents.add("onMouseDown"),t.delegatedEvents.add("onMouseUp"),t.delegatedEvents.add("onMouseMove"),t.delegatedEvents.add("onSubmit"),t.delegatedEvents.add("onDblClick"),t.delegatedEvents.add("onKeyDown"),t.delegatedEvents.add("onKeyUp"),t.delegatedEvents.add("onKeyPress")}),a=n(function(e,t){function n(e,t,n,o){var r=c.get(e);if(n)r||(r={items:new Map,docEvent:null},r.docEvent=s(e,r),c.set(e,r)),t||u&&"onClick"===e&&a(o),r.items.set(o,n);else if(r){var l=r.items;l.delete(o)&&0===l.size&&(document.removeEventListener(i(e),r.docEvent),c.delete(e))}}function o(e,t,n,i,r,l){var s=n.get(t);if((!s||(i--,l.dom=t,s.event?s.event(s.data,e):s(e),!e.cancelBubble))&&i>0){var d=t.parentNode;if(null===d||r&&1===d.nodeType&&d.disabled)return;o(e,d,n,i,r,l)}}function i(e){return e.substr(2).toLowerCase()}function r(){this.cancelBubble=!0,this.stopImmediatePropagation()}function s(e,t){var n=function(e){var n=t.items.size;if(n>0){e.stopPropagation=r;var i={dom:document};try{Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return i.dom}})}catch(e){}o(e,e.target,t.items,n,"click"===e.type,i)}};return document.addEventListener(i(e),n),n}function d(){}function a(e){e.onclick=d}Object.defineProperty(t,"__esModule",{value:!0});var u=l.isBrowser&&!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform),c=new Map;t.handleEvent=n}),u=n(function(e,t){function n(e){return"checkbox"===e||"radio"===e}function o(e){var t=this,n=t.props||b.EMPTY_OBJ,o=t.dom,i=n.value;if(n.onInput){var r=n.onInput;r.event?r.event(r.data,e):r(e)}else n.oninput&&n.oninput(e);var l=this,s=l.props||b.EMPTY_OBJ;i!==s.value&&d(s,o)}function i(e){var t=this.props||b.EMPTY_OBJ,n=t.onChange;n.event?n.event(n.data,e):n(e)}function r(e){e.stopPropagation();var t=this,n=t.props||b.EMPTY_OBJ,o=t.dom,i=n.value;if(n.onClick){var r=n.onClick;r.event?r.event(r.data,e):r(e)}else n.onclick&&n.onclick(e);var l=this,s=l.props||b.EMPTY_OBJ;i!==s.value&&d(s,o)}function s(e,t,l,s,a){d(l,t),s&&a&&(n(l.type)?(t.onclick=r.bind(e),t.onclick.wrapped=!0):(t.oninput=o.bind(e),t.oninput.wrapped=!0),l.onChange&&(t.onchange=i.bind(e),t.onchange.wrapped=!0))}function d(e,t){var o=e.type,i=e.value,r=e.checked,s=e.multiple,d=e.defaultValue,a=!l.isNullOrUndef(i);o&&o!==t.type&&t.setAttribute("type",o),s&&s!==t.multiple&&(t.multiple=s),l.isNullOrUndef(d)||a||(t.defaultValue=d+""),n(o)?(a&&(t.value=i),l.isNullOrUndef(r)||(t.checked=r)):a&&t.value!==i?t.value=i:l.isNullOrUndef(r)||(t.checked=r)}Object.defineProperty(t,"__esModule",{value:!0}),t.isCheckedType=n,t.processInput=s,t.applyValue=d}),c=n(function(e,t){function n(e,t){if("optgroup"===e.type){var n=e.children;if(l.isArray(n))for(var i=0,r=n.length;i<r;i++)o(n[i],t);else k.isVNode(n)&&o(n,t)}else o(e,t)}function o(e,t){var n=e.props||b.EMPTY_OBJ,o=e.dom;o.value=n.value,l.isArray(t)&&-1!==t.indexOf(n.value)||n.value===t?o.selected=!0:l.isNullOrUndef(t)&&l.isNullOrUndef(n.selected)||(o.selected=n.selected||!1)}function i(e){var t=this,n=t.props||b.EMPTY_OBJ,o=t.dom,i=n.value;if(n.onChange){var r=n.onChange;r.event?r.event(r.data,e):r(e)}else n.onchange&&n.onchange(e);var l=this,d=l.props||b.EMPTY_OBJ;i!==d.value&&s(l,o,d,!1)}function r(e,t,n,o,r){s(e,t,n,o),o&&r&&(t.onchange=i.bind(e),t.onchange.wrapped=!0)}function s(e,t,o,i){o.multiple!==t.multiple&&(t.multiple=o.multiple);var r=e.children;if(!l.isInvalid(r)){var s=o.value;if(i&&l.isNullOrUndef(s)&&(s=o.defaultValue),l.isArray(r))for(var d=0,a=r.length;d<a;d++)n(r[d],s);else k.isVNode(r)&&n(r,s)}}Object.defineProperty(t,"__esModule",{value:!0}),t.processSelect=r,t.applyValue=s}),p=n(function(e,t){function n(e){var t=this.props||b.EMPTY_OBJ,n=t.onChange;n.event?n.event(n.data,e):n(e)}function o(e){var t=this,n=t.props||b.EMPTY_OBJ,o=n.value;if(n.onInput){var i=n.onInput;i.event?i.event(i.data,e):i(e)}else n.oninput&&n.oninput(e);var l=this;o!==(l.props||b.EMPTY_OBJ).value&&r(l,t.dom,!1)}function i(e,t,i,l,s){r(i,t,l),l&&s&&(t.oninput=o.bind(e),t.oninput.wrapped=!0,i.onChange&&(t.onchange=n.bind(e),t.onchange.wrapped=!0))}function r(e,t,n){var o=e.value,i=t.value;if(l.isNullOrUndef(o)){if(n){var r=e.defaultValue;l.isNullOrUndef(r)?""!==i&&(t.value=""):r!==i&&(t.value=r)}}else i!==o&&(t.value=o)}Object.defineProperty(t,"__esModule",{value:!0}),t.processTextarea=i,t.applyValue=r}),f=n(function(e,t){function n(e,t,n,o,i,r){512&e&&u.processInput(t,n,o,i,r),2048&e&&c.processSelect(t,n,o,i,r),1024&e&&p.processTextarea(t,n,o,i,r)}function o(e){return e.type&&u.isCheckedType(e.type)?!l.isNullOrUndef(e.checked):!l.isNullOrUndef(e.value)}Object.defineProperty(t,"__esModule",{value:!0}),t.processElement=n,t.isControlledFormElement=o}),h=n(function(e,t){function n(e){for(var t=e.firstChild;t;)if(8===t.nodeType)if("!"===t.data){var n=document.createTextNode("");e.replaceChild(n,t),t=t.nextSibling}else{var o=t.previousSibling;e.removeChild(t),t=o||e.firstChild}else t=t.nextSibling}function o(e,t,n,o,i,r){var l=e.type,a=e.ref;e.dom=t;var u=e.props||b.EMPTY_OBJ;if(r){var p=t.namespaceURI===d.svgNS,f=b.createClassComponentInstance(e,l,u,o,p,n),h=f._lastInput;f._vComponent=e,f._vNode=e,c(h,t,n,f._childContext,p),N.mountClassComponentCallbacks(e,a,f,n),f._updating=!1,s.options.findDOMNodeEnabled&&g.componentToDOMNodeMap.set(f,t)}else{var h=b.createFunctionalComponentInput(e,l,u,o);c(h,t,n,o,i),e.children=h,e.dom=h.dom,N.mountFunctionalComponentCallbacks(a,t,n)}return t}function i(e,t,n,o,i){var s=e.children,d=e.props,a=e.className,u=e.flags,c=e.ref;if((i||128&u)&&(i=!0),1!==t.nodeType||t.tagName.toLowerCase()!==e.type){var p=N.mountElement(e,null,n,o,i);return e.dom=p,b.replaceChild(t.parentNode,p,t),p}if(e.dom=t,s&&r(s,t,n,o,i),d){var h=!1,m=(3584&u)>0;m&&(h=f.isControlledFormElement(d));for(var v in d)y.patchProp(v,null,d[v],t,i,h);m&&f.processElement(u,e,t,d,!0,h)}return l.isNullOrUndef(a)?t.removeAttribute("class"):i?t.setAttribute("class",a):t.className=a,c&&N.mountRef(t,c,n),t}function r(e,t,o,i,r){n(t);var s=t.firstChild;if(l.isArray(e))for(var d=0,a=e.length;d<a;d++){var u=e[d];!l.isNull(u)&&l.isObject(u)&&(l.isNull(s)?N.mount(u,t,o,i,r):s=c(u,s,o,i,r).nextSibling)}else l.isStringOrNumber(e)?(s&&3===s.nodeType?s.nodeValue!==e&&(s.nodeValue=e):e&&(t.textContent=e),s=s.nextSibling):l.isObject(e)&&(c(e,s,o,i,r),s=s.nextSibling);for(;s;){var p=s.nextSibling;t.removeChild(s),s=p}}function a(e,t){if(3!==t.nodeType){var n=N.mountText(e,null);return e.dom=n,b.replaceChild(t.parentNode,n,t),n}var o=e.children;return t.nodeValue!==o&&(t.nodeValue=o),e.dom=t,t}function u(e,t){return e.dom=t,t}function c(e,t,n,r,s){var d=e.flags;return 28&d?o(e,t,n,r,s,4&d):3970&d?i(e,t,n,r,s):1&d?a(e,t):4096&d?u(e,t):void l.throwError()}function p(e,t,n){if(!l.isNull(t)){var o=t.firstChild;if(!l.isNull(o)){for(c(e,o,n,b.EMPTY_OBJ,!1),o=t.firstChild;o=o.nextSibling;)t.removeChild(o);return!0}}return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeChildNodes=n,t.hydrateRoot=p}),m=n(function(e,t){function n(e,t,n,o){var i=e.type,r=d.get(i);if(!l.isUndefined(r)){var s=e.key,a=null===s?r.nonKeyed:r.keyed.get(s);if(!l.isUndefined(a)){var u=a.pop();if(!l.isUndefined(u))return y.patchElement(u,e,null,t,n,o,!0),e.dom}}return null}function o(e){var t=e.type,n=e.key,o=d.get(t);if(l.isUndefined(o)&&(o={keyed:new Map,nonKeyed:[]},d.set(t,o)),l.isNull(n))o.nonKeyed.push(e);else{var i=o.keyed.get(n);l.isUndefined(i)&&(i=[],o.keyed.set(n,i)),i.push(e)}}function i(e,t,n,o){var i=e.type,r=s.get(i);if(!l.isUndefined(r)){var d=e.key,a=null===d?r.nonKeyed:r.keyed.get(d);if(!l.isUndefined(a)){var u=a.pop();if(!l.isUndefined(u)){var c=e.flags;if(!y.patchComponent(u,e,null,t,n,o,4&c,!0))return e.dom}}}return null}function r(e){var t=e.ref;if(!t||!(t.onComponentWillMount||t.onComponentWillUnmount||t.onComponentDidMount||t.onComponentWillUpdate||t.onComponentDidUpdate)){var n=e.type,o=e.key,i=s.get(n);if(l.isUndefined(i)&&(i={keyed:new Map,nonKeyed:[]},s.set(n,i)),l.isNull(o))i.nonKeyed.push(e);else{var r=i.keyed.get(o);l.isUndefined(r)&&(r=[],i.keyed.set(o,r)),r.push(e)}}}Object.defineProperty(t,"__esModule",{value:!0});var s=new Map,d=new Map;t.recycleElement=n,t.poolElement=o,t.recycleComponent=i,t.poolComponent=r}),v=n(function(e,t){function n(e,t,n,l,s){var d=e.flags;28&d?i(e,t,n,l,s):3970&d?r(e,t,n,l,s):4097&d&&o(e,t)}function o(e,t){l.isNull(t)||b.removeChild(t,e.dom)}function i(e,t,o,i,r){var d=e.children,a=e.flags,u=4&a,c=e.ref,p=e.dom;if(r||(u?d._unmounted||(d._blockSetState=!0,l.isNull(s.options.beforeUnmount)||s.options.beforeUnmount(e),l.isUndefined(d.componentWillUnmount)||d.componentWillUnmount(),c&&!r&&c(null),d._unmounted=!0,s.options.findDOMNodeEnabled&&g.componentToDOMNodeMap.delete(d),n(d._lastInput,null,d._lifecycle,!1,r)):(l.isNullOrUndef(c)||l.isNullOrUndef(c.onComponentWillUnmount)||c.onComponentWillUnmount(p),n(d,null,o,!1,r))),t){var f=d._lastInput;l.isNullOrUndef(f)&&(f=d),b.removeChild(t,p)}s.options.recyclingEnabled&&!u&&(t||i)&&m.poolComponent(e)}function r(e,t,n,o,i){var r=e.dom,u=e.ref,c=e.props;u&&!i&&a(u);var p=e.children;if(l.isNullOrUndef(p)||d(p,n,i),!l.isNull(c))for(var f in c)null!==c[f]&&y.isAttrAnEvent(f)&&(y.patchEvent(f,c[f],null,r),c[f]=null);l.isNull(t)||b.removeChild(t,r),s.options.recyclingEnabled&&(t||o)&&m.poolElement(e)}function d(e,t,o){if(l.isArray(e))for(var i=0,r=e.length;i<r;i++){var s=e[i];!l.isInvalid(s)&&l.isObject(s)&&n(s,null,t,!1,o)}else l.isObject(e)&&n(e,null,t,!1,o)}function a(e){if(l.isFunction(e))e(null);else{if(l.isInvalid(e))return;l.throwError()}}Object.defineProperty(t,"__esModule",{value:!0}),t.unmount=n,t.unmountComponent=i,t.unmountElement=r}),g=n(function(e,t){function n(e){s.options.findDOMNodeEnabled||l.throwError();var n=e&&e.nodeType?e:null;return t.componentToDOMNodeMap.get(e)||n}function o(e){for(var t=0,n=u.length;t<n;t++){var o=u[t];if(o.dom===e)return o}return null}function i(e,t,n){var o={dom:e,input:t,lifecycle:n};return u.push(o),o}function r(e){for(var t=0,n=u.length;t<n;t++)if(u[t]===e)return void u.splice(t,1)}function d(e,t){if(c===t&&l.throwError(),e!==l.NO_OP){var n=o(t);if(l.isNull(n)){var s=new l.Lifecycle;l.isInvalid(e)||(e.dom&&(e=k.directClone(e)),h.hydrateRoot(e,t,s)||N.mount(e,t,s,b.EMPTY_OBJ,!1),n=i(t,e,s),s.trigger())}else{var s=n.lifecycle;s.listeners=[],l.isNullOrUndef(e)?(v.unmount(n.input,t,s,!1,!1),r(n)):(e.dom&&(e=k.directClone(e)),y.patch(n.input,e,t,s,b.EMPTY_OBJ,!1,!1)),n.input=e,s.trigger()}if(n){var d=n.input;if(d&&28&d.flags)return d.children}}}function a(e){return function(t,n){e||(e=t),d(n,e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.componentToDOMNodeMap=new Map;var u=s.options.roots;t.findDOMNode=n;var c=l.isBrowser?document.body:null;t.render=d,t.createRenderer=a}),y=n(function(e,t){function n(e,t,n,o,r,l,s){if(e!==t){var d=e.flags,a=t.flags;28&a?28&d?u(e,t,n,o,r,l,4&a,s):b.replaceVNode(n,N.mountComponent(t,null,o,r,l,4&a),e,o,s):3970&a?3970&d?i(e,t,n,o,r,l,s):b.replaceVNode(n,N.mountElement(t,null,o,r,l),e,o,s):1&a?1&d?c(e,t):b.replaceVNode(n,N.mountText(t,null),e,o,s):4096&a?4096&d?p(e,t):b.replaceVNode(n,N.mountVoid(t,null),e,o,s):b.replaceLastChildAndUnmount(e,t,n,o,r,l,s)}}function o(e,t,n,o){k.isVNode(e)?v.unmount(e,t,n,!0,o):l.isArray(e)?b.removeAllChildren(t,e,n,o):t.textContent=""}function i(e,t,n,o,i,s,d){var a=t.type;if(e.type!==a)b.replaceWithNewNode(e,t,n,o,i,s,d);else{var u=e.dom,c=e.props,p=t.props,h=e.children,m=t.children,v=e.flags,g=t.flags,y=t.ref,_=e.className,k=t.className;if(t.dom=u,(s||(128&g)>0)&&(s=!0),h!==m&&r(v,g,h,m,u,o,i,s,d),c!==p){var C=c||b.EMPTY_OBJ,E=p||b.EMPTY_OBJ,x=!1;if(E!==b.EMPTY_OBJ){var M=(3584&g)>0;M&&(x=f.isControlledFormElement(E));for(var P in E){var S=E[P];O(P,C[P],S,u,s,x)}M&&f.processElement(g,t,u,E,!1,x)}if(C!==b.EMPTY_OBJ)for(var P in C)l.isNullOrUndef(E[P])&&U(P,C[P],u)}_!==k&&(l.isNullOrUndef(k)?u.removeAttribute("class"):s?u.setAttribute("class",k):u.className=k),y&&(e.ref!==y||d)&&N.mountRef(u,y,o)}}function r(e,t,i,r,s,d,a,u,c){var p=!1,f=!1;64&t?p=!0:32&e&&32&t?(f=!0,p=!0):l.isInvalid(r)?o(i,s,d,c):l.isInvalid(i)?l.isStringOrNumber(r)?b.setTextContent(s,r):l.isArray(r)?N.mountArrayChildren(r,s,d,a,u):N.mount(r,s,d,a,u):l.isStringOrNumber(r)?l.isStringOrNumber(i)?b.updateTextContent(s,r):(o(i,s,d,c),b.setTextContent(s,r)):l.isArray(r)?l.isArray(i)?(p=!0,b.isKeyed(i,r)&&(f=!0)):(o(i,s,d,c),N.mountArrayChildren(r,s,d,a,u)):l.isArray(i)?(b.removeAllChildren(s,i,d,c),N.mount(r,s,d,a,u)):k.isVNode(r)&&(k.isVNode(i)?n(i,r,s,d,a,u,c):(o(i,s,d,c),N.mount(r,s,d,a,u))),p&&(f?m(i,r,s,d,a,u,c):h(i,r,s,d,a,u,c))}function u(e,t,o,i,r,d,a,u){var c=e.type,p=t.type,f=e.key,h=t.key;if(c!==p||f!==h)return b.replaceWithNewNode(e,t,o,i,r,d,u),!1;var m=t.props||b.EMPTY_OBJ;if(a){var v=e.children;if(v._updating=!0,v._unmounted){if(l.isNull(o))return!0;b.replaceChild(o,N.mountComponent(t,null,i,r,d,4&t.flags),e.dom)}else{var y=!l.isUndefined(v.componentDidUpdate),_=v.state,O=y?l.combineFrom(_,null):_,C=v.props,E=void 0;l.isUndefined(v.getChildContext)||(E=v.getChildContext()),t.children=v,v._isSVG=d,E=l.isNullOrUndef(E)?r:l.combineFrom(r,E);var U=v._lastInput,x=v._updateComponent(O,_,C,m,r,!1,!1),M=!0;v._childContext=E,l.isInvalid(x)?x=k.createVoidVNode():x===l.NO_OP?(x=U,M=!1):l.isStringOrNumber(x)?x=k.createTextVNode(x,null):l.isArray(x)?l.throwError():l.isObject(x)&&(l.isNull(x.dom)||(x=k.directClone(x))),28&x.flags?x.parentVNode=t:28&U.flags&&(U.parentVNode=t),v._lastInput=x,v._vNode=t,M&&(n(U,x,o,i,E,d,u),y&&v.componentDidUpdate(C,O),l.isNull(s.options.afterUpdate)||s.options.afterUpdate(t),s.options.findDOMNodeEnabled&&g.componentToDOMNodeMap.set(v,x.dom)),t.dom=x.dom}v._updating=!1}else{var P=!0,C=e.props,S=t.ref,w=!l.isNullOrUndef(S),U=e.children,x=U;t.dom=e.dom,t.children=U,f!==h?P=!0:w&&!l.isNullOrUndef(S.onComponentShouldUpdate)&&(P=S.onComponentShouldUpdate(C,m)),!1!==P&&(w&&!l.isNullOrUndef(S.onComponentWillUpdate)&&S.onComponentWillUpdate(C,m),x=p(m,r),l.isInvalid(x)?x=k.createVoidVNode():l.isStringOrNumber(x)&&x!==l.NO_OP?x=k.createTextVNode(x,null):l.isArray(x)?l.throwError():l.isObject(x)&&(l.isNull(x.dom)||(x=k.directClone(x))),x!==l.NO_OP&&(n(U,x,o,i,r,d,u),t.children=x,w&&!l.isNullOrUndef(S.onComponentDidUpdate)&&S.onComponentDidUpdate(C,m),t.dom=x.dom)),28&x.flags?x.parentVNode=t:28&U.flags&&(U.parentVNode=t)}return!1}function c(e,t){var n=t.children,o=e.dom;t.dom=o,e.children!==n&&(o.nodeValue=n)}function p(e,t){t.dom=e.dom}function h(e,t,o,i,r,l,s){for(var d=e.length,a=t.length,u=d>a?a:d,c=0;c<u;c++){var p=t[c];p.dom&&(p=t[c]=k.directClone(p)),n(e[c],p,o,i,r,l,s)}if(d<a)for(c=u;c<a;c++){var p=t[c];p.dom&&(p=t[c]=k.directClone(p)),b.appendChild(o,N.mount(p,null,i,r,l))}else if(0===a)b.removeAllChildren(o,e,i,s);else if(d>a)for(c=u;c<d;c++)v.unmount(e[c],o,i,!1,s)}function m(e,t,o,i,r,s,d){var a,u,c,p,f,h,m,g=e.length,_=t.length,O=g-1,C=_-1,E=0,U=0;if(0===g)return void(0!==_&&N.mountArrayChildren(t,o,i,r,s));if(0===_)return void b.removeAllChildren(o,e,i,d);var x=e[E],M=t[U],P=e[O],S=t[C];M.dom&&(t[U]=M=k.directClone(M)),S.dom&&(t[C]=S=k.directClone(S));e:for(;;){for(;x.key===M.key;){if(n(x,M,o,i,r,s,d),E++,U++,E>O||U>C)break e;x=e[E],M=t[U],M.dom&&(t[U]=M=k.directClone(M))}for(;P.key===S.key;){if(n(P,S,o,i,r,s,d),O--,C--,E>O||U>C)break e;P=e[O],S=t[C],S.dom&&(t[C]=S=k.directClone(S))}if(P.key!==M.key){if(x.key!==S.key)break;n(x,S,o,i,r,s,d),h=C+1,f=h<t.length?t[h].dom:null,b.insertOrAppend(o,S.dom,f),E++,C--,x=e[E],S=t[C],S.dom&&(t[C]=S=k.directClone(S))}else n(P,M,o,i,r,s,d),b.insertOrAppend(o,M.dom,x.dom),O--,U++,P=e[O],M=t[U],M.dom&&(t[U]=M=k.directClone(M))}if(E>O){if(U<=C)for(h=C+1,f=h<t.length?t[h].dom:null;U<=C;)m=t[U],m.dom&&(t[U]=m=k.directClone(m)),U++,b.insertOrAppend(o,N.mount(m,null,i,r,s),f)}else if(U>C)for(;E<=O;)v.unmount(e[E++],o,i,!1,d);else{g=O-E+1,_=C-U+1;var w=new Array(_);for(a=0;a<_;a++)w[a]=-1;var T=!1,V=0,D=0;if(_<=4||g*_<=16){for(a=E;a<=O;a++)if(c=e[a],D<_)for(u=U;u<=C;u++)if(p=t[u],c.key===p.key){w[u-U]=a,V>u?T=!0:V=u,p.dom&&(t[u]=p=k.directClone(p)),n(c,p,o,i,r,s,d),D++,e[a]=null;break}}else{var A=new Map;for(a=U;a<=C;a++)A.set(t[a].key,a);for(a=E;a<=O;a++)c=e[a],D<_&&(u=A.get(c.key),l.isUndefined(u)||(p=t[u],w[u-U]=a,V>u?T=!0:V=u,p.dom&&(t[u]=p=k.directClone(p)),n(c,p,o,i,r,s,d),D++,e[a]=null))}if(g===e.length&&0===D)for(b.removeAllChildren(o,e,i,d);U<_;)m=t[U],m.dom&&(t[U]=m=k.directClone(m)),U++,b.insertOrAppend(o,N.mount(m,null,i,r,s),null);else{for(a=g-D;a>0;)c=e[E++],l.isNull(c)||(v.unmount(c,o,i,!0,d),a--);if(T){var I=y(w);for(u=I.length-1,a=_-1;a>=0;a--)-1===w[a]?(V=a+U,m=t[V],m.dom&&(t[V]=m=k.directClone(m)),h=V+1,f=h<t.length?t[h].dom:null,b.insertOrAppend(o,N.mount(m,o,i,r,s),f)):u<0||a!==I[u]?(V=a+U,m=t[V],h=V+1,f=h<t.length?t[h].dom:null,b.insertOrAppend(o,m.dom,f)):u--}else if(D!==_)for(a=_-1;a>=0;a--)-1===w[a]&&(V=a+U,m=t[V],m.dom&&(t[V]=m=k.directClone(m)),h=V+1,f=h<t.length?t[h].dom:null,b.insertOrAppend(o,N.mount(m,null,i,r,s),f))}}}function y(e){var t,n,o,i,r,l=e.slice(0),s=[0],d=e.length;for(t=0;t<d;t++){var a=e[t];if(-1!==a)if(n=s[s.length-1],e[n]<a)l[t]=n,s.push(t);else{for(o=0,i=s.length-1;o<i;)r=(o+i)/2|0,e[s[r]]<a?o=r+1:i=r;a<e[s[o]]&&(o>0&&(l[t]=s[o-1]),s[o]=t)}}for(o=s.length,i=s[o-1];o-- >0;)s[o]=i,i=l[i];return s}function _(e){return"o"===e[0]&&"n"===e[1]}function O(e,t,n,o,i,r){if(t!==n){if(d.skipProps.has(e)||r&&"value"===e)return;if(d.booleanProps.has(e))e="autoFocus"===e?e.toLowerCase():e,o[e]=!!n;else if(d.strictProps.has(e)){var s=l.isNullOrUndef(n)?"":n;o[e]!==s&&(o[e]=s)}else if(_(e))C(e,t,n,o);else if(l.isNullOrUndef(n))o.removeAttribute(e);else if("style"===e)E(t,n,o);else if("dangerouslySetInnerHTML"===e){var a=t&&t.__html,u=n&&n.__html;a!==u&&(l.isNullOrUndef(u)||(o.innerHTML=u))}else i&&d.namespaces.has(e)?o.setAttributeNS(d.namespaces.get(e),e,n):o.setAttribute(e,n)}}function C(e,t,n,o){if(t!==n)if(d.delegatedEvents.has(e))a.handleEvent(e,t,n,o);else{var i=e.toLowerCase(),r=o[i];if(r&&r.wrapped)return;if(l.isFunction(n)||l.isNullOrUndef(n))o[i]=n;else{var s=n.event;s&&l.isFunction(s)?o[i]=function(e){s(n.data,e)}:l.throwError()}}}function E(e,t,n){var o=n.style;if(l.isString(t))return void(o.cssText=t);for(var i in t){var r=t[i];!l.isNumber(r)||d.isUnitlessNumber.has(i)?o[i]=r:o[i]=r+"px"}if(!l.isNullOrUndef(e))for(var i in e)l.isNullOrUndef(t[i])&&(o[i]="")}function U(e,t,n){"value"===e?n.value="":"style"===e?n.removeAttribute("style"):_(e)?a.handleEvent(e,t,null,n):n.removeAttribute(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.patch=n,t.patchElement=i,t.patchComponent=u,t.patchText=c,t.patchVoid=p,t.patchNonKeyedChildren=h,t.patchKeyedChildren=m,t.isAttrAnEvent=_,t.patchProp=O,t.patchEvent=C,t.patchStyle=E}),N=n(function(e,t){function n(e,t,n,s,d){var u=e.flags;return 3970&u?r(e,t,n,s,d):28&u?a(e,t,n,s,d,4&u):4096&u?i(e,t):1&u?o(e,t):void l.throwError()}function o(e,t){var n=document.createTextNode(e.children);return e.dom=n,l.isNull(t)||b.appendChild(t,n),n}function i(e,t){var n=document.createTextNode("");return e.dom=n,l.isNull(t)||b.appendChild(t,n),n}function r(e,t,o,i,r){if(s.options.recyclingEnabled){var a=m.recycleElement(e,o,i,r);if(!l.isNull(a))return l.isNull(t)||b.appendChild(t,a),a}var u=e.flags;(r||128&u)&&(r=!0);var c=b.documentCreateElement(e.type,r),h=e.children,v=e.props,g=e.className,N=e.ref;if(e.dom=c,l.isInvalid(h)||(l.isStringOrNumber(h)?b.setTextContent(c,h):l.isArray(h)?d(h,c,o,i,r):k.isVNode(h)&&n(h,c,o,i,r)),!l.isNull(v)){var _=!1,O=(3584&u)>0;O&&(_=f.isControlledFormElement(v));for(var C in v)y.patchProp(C,null,v[C],c,r,_);O&&f.processElement(u,e,c,v,!0,_)}return null!==g&&(r?c.setAttribute("class",g):c.className=g),l.isNull(N)||p(c,N,o),l.isNull(t)||b.appendChild(t,c),c}function d(e,t,o,i,r){for(var s=0,d=e.length;s<d;s++){var a=e[s];l.isInvalid(a)||(a.dom&&(e[s]=a=k.directClone(a)),n(e[s],t,o,i,r))}}function a(e,t,o,i,r,d){if(s.options.recyclingEnabled){var a=m.recycleComponent(e,o,i,r);if(!l.isNull(a))return l.isNull(t)||b.appendChild(t,a),a}var p,f=e.type,h=e.props||b.EMPTY_OBJ,v=e.ref;if(d){var y=b.createClassComponentInstance(e,f,h,i,r,o),N=y._lastInput;y._vNode=e,e.dom=p=n(N,null,o,y._childContext,r),l.isNull(t)||b.appendChild(t,p),u(e,v,y,o),y._updating=!1,s.options.findDOMNodeEnabled&&g.componentToDOMNodeMap.set(y,p)}else{var N=b.createFunctionalComponentInput(e,f,h,i);e.dom=p=n(N,null,o,i,r),e.children=N,c(v,p,o),l.isNull(t)||b.appendChild(t,p)}return p}function u(e,t,n,o){t&&(l.isFunction(t)?t(n):l.throwError());var i=!l.isUndefined(n.componentDidMount),r=s.options.afterMount;!i&&l.isNull(r)||o.addListener(function(){n._updating=!0,r&&r(e),i&&n.componentDidMount(),n._updating=!1})}function c(e,t,n){e&&(l.isNullOrUndef(e.onComponentWillMount)||e.onComponentWillMount(),l.isNullOrUndef(e.onComponentDidMount)||n.addListener(function(){return e.onComponentDidMount(t)}))}function p(e,t,n){if(l.isFunction(t))n.addListener(function(){return t(e)});else{if(l.isInvalid(t))return;l.throwError()}}Object.defineProperty(t,"__esModule",{value:!0}),t.mount=n,t.mountText=o,t.mountVoid=i,t.mountElement=r,t.mountArrayChildren=d,t.mountComponent=a,t.mountClassComponentCallbacks=u,t.mountFunctionalComponentCallbacks=c,t.mountRef=p}),b=n(function(e,t){function n(e,n,o,i,r,d){l.isUndefined(i)&&(i=t.EMPTY_OBJ);var a=new n(o,i);e.children=a,a._blockSetState=!1,a.context=i,a.props===t.EMPTY_OBJ&&(a.props=o),a._lifecycle=d,a._unmounted=!1,a._pendingSetState=!0,a._isSVG=r,l.isUndefined(a.componentWillMount)||(a._blockRender=!0,a.componentWillMount(),a._blockRender=!1);var u;l.isUndefined(a.getChildContext)||(u=a.getChildContext()),l.isNullOrUndef(u)?a._childContext=i:a._childContext=l.combineFrom(i,u),l.isNull(s.options.beforeRender)||s.options.beforeRender(a);var c=a.render(o,a.state,i);return l.isNull(s.options.afterRender)||s.options.afterRender(a),l.isArray(c)?l.throwError():l.isInvalid(c)?c=k.createVoidVNode():l.isStringOrNumber(c)?c=k.createTextVNode(c,null):(c.dom&&(c=k.directClone(c)),28&c.flags&&(c.parentVNode=e)),a._pendingSetState=!1,a._lastInput=c,a}function o(e,t,n,o,r,l,s){i(n,N.mount(t,null,o,r,l),e,o,s)}function i(e,t,n,o,i){v.unmount(n,null,o,!1,i),m(e,t,n.dom)}function r(e,t,n,o){var i=t(n,o);return l.isArray(i)?l.throwError():l.isInvalid(i)?i=k.createVoidVNode():l.isStringOrNumber(i)?i=k.createTextVNode(i,null):(i.dom&&(i=k.directClone(i)),28&i.flags&&(i.parentVNode=e)),i}function a(e,t){""!==t?e.textContent=t:e.appendChild(document.createTextNode(""))}function u(e,t){e.firstChild.nodeValue=t}function c(e,t){e.appendChild(t)}function p(e,t,n){l.isNullOrUndef(n)?c(e,t):e.insertBefore(t,n)}function f(e,t){return!0===t?document.createElementNS(d.svgNS,e):document.createElement(e)}function h(e,t,n,o,i,r,l){v.unmount(e,null,o,!1,l);var s=N.mount(t,null,o,i,r);t.dom=s,m(n,s,e.dom)}function m(e,t,n){e||(e=n.parentNode),e.replaceChild(t,n)}function g(e,t){e.removeChild(t)}function y(e,t,n,o){e.textContent="",(!s.options.recyclingEnabled||s.options.recyclingEnabled&&!o)&&b(null,t,n,o)}function b(e,t,n,o){for(var i=0,r=t.length;i<r;i++){var s=t[i];l.isInvalid(s)||v.unmount(s,e,n,!0,o)}}function _(e,t){return t.length>0&&!l.isNullOrUndef(t[0])&&!l.isNullOrUndef(t[0].key)&&e.length>0&&!l.isNullOrUndef(e[0])&&!l.isNullOrUndef(e[0].key)}Object.defineProperty(t,"__esModule",{value:!0}),t.EMPTY_OBJ={},t.createClassComponentInstance=n,t.replaceLastChildAndUnmount=o,t.replaceVNode=i,t.createFunctionalComponentInput=r,t.setTextContent=a,t.updateTextContent=u,t.appendChild=c,t.insertOrAppend=p,t.documentCreateElement=f,t.replaceWithNewNode=h,t.replaceChild=m,t.removeChild=g,t.removeAllChildren=y,t.removeChildren=b,t.isKeyed=_}),k=n(function(e,t){function n(e,t,n,o,i,r,l){this.children=e,this.className=t,this.dom=null,this.flags=n,this.key=o,this.props=i,this.ref=r,this.type=l}function o(e,t,o,i,r,d,a,u){16&e&&(e=l.isStatefulComponent(t)?4:8);var c=new n(void 0===i?null:i,void 0===o?null:o,e,void 0===d?null:d,void 0===r?null:r,void 0===a?null:a,t);return!0!==u&&O.normalize(c),null!==s.options.createVNode&&s.options.createVNode(c),c}function i(e){var t,n=e.flags;if(28&n){var r=void 0,s=e.props;if(s){r={};for(var d in s)r[d]=s[d]}else r=b.EMPTY_OBJ;t=o(n,e.type,e.className,null,r,e.key,e.ref,!0);var c=t.props;if(c){var p=c.children;if(p)if(l.isArray(p)){var f=p.length;if(f>0){for(var h=[],m=0;m<f;m++){var v=p[m];l.isStringOrNumber(v)?h.push(v):!l.isInvalid(v)&&u(v)&&h.push(i(v))}c.children=h}}else u(p)&&(c.children=i(p))}t.children=null}else if(3970&n){var g=e.children,r=void 0,s=e.props;if(s){r={};for(var d in s)r[d]=s[d]}else r=b.EMPTY_OBJ;t=o(n,e.type,e.className,g,r,e.key,e.ref,!g)}else 1&n&&(t=a(e.children,e.key));return t}function r(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var s=n,d=n.length;d>0&&!l.isUndefined(n[0])&&(t||(t={}),1===d&&(s=n[0]),l.isUndefined(s)||(t.children=s));var c;if(l.isArray(e)){for(var p=[],f=0,h=e.length;f<h;f++)p.push(i(e[f]));c=p}else{var m=e.flags,v=e.className||t&&t.className,g=l.isNullOrUndef(e.key)?t?t.key:null:e.key,y=e.ref||(t?t.ref:null);if(28&m){c=o(m,e.type,v,null,e.props||t?l.combineFrom(e.props,t):b.EMPTY_OBJ,g,y,!0);var N=c.props;if(N){var _=N.children;if(_)if(l.isArray(_)){var h=_.length;if(h>0){for(var p=[],f=0;f<h;f++){var k=_[f];l.isStringOrNumber(k)?p.push(k):!l.isInvalid(k)&&u(k)&&p.push(i(k))}N.children=p}}else u(_)&&(N.children=i(_))}c.children=null}else 3970&m?(s=t&&!l.isUndefined(t.children)?t.children:e.children,c=o(m,e.type,v,s,e.props||t?l.combineFrom(e.props,t):b.EMPTY_OBJ,g,y,!s)):1&m&&(c=a(e.children,g))}return c}function d(){return o(4096,null)}function a(e,t){return o(1,null,null,e,null,t)}function u(e){return!!e.flags}Object.defineProperty(t,"__esModule",{value:!0}),t.createVNode=o,t.directClone=i,t.cloneVNode=r,t.createVoidVNode=d,t.createTextVNode=a,t.isVNode=u}),O=n(function(e,t){function n(e,t){return t.key=e,t}function o(e,t){return l.isNumber(e)&&(e="."+e),l.isNull(t.key)||"."===t.key[0]?n(e,t):t}function i(e,t){return t.key=e+t.key,t}function r(e,t,o,s){for(var d=e.length;o<d;o++){var a=e[o],u=s+"."+o;l.isInvalid(a)||(l.isArray(a)?r(a,t,0,u):(l.isStringOrNumber(a)?a=k.createTextVNode(a,null):(k.isVNode(a)&&a.dom||a.key&&"."===a.key[0])&&(a=k.directClone(a)),a=l.isNull(a.key)||"."===a.key[0]?n(u,a):i(s,a),t.push(a)))}}function s(e){var t;e.$?e=e.slice():e.$=!0;for(var n=0,i=e.length;n<i;n++){var s=e[n];if(l.isInvalid(s)||l.isArray(s)){var d=(t||e).slice(0,n);return r(e,d,n,""),d}l.isStringOrNumber(s)?(t||(t=e.slice(0,n)),t.push(o(n,k.createTextVNode(s,null)))):k.isVNode(s)&&null!==s.dom||l.isNull(s.key)&&!(64&s.flags)?(t||(t=e.slice(0,n)),t.push(o(n,k.directClone(s)))):t&&t.push(o(n,k.directClone(s)))}return t||e}function d(e){return l.isArray(e)?s(e):k.isVNode(e)&&null!==e.dom?k.directClone(e):e}function a(e,t,n){3970&e.flags&&(l.isNullOrUndef(n)&&!l.isNullOrUndef(t.children)&&(e.children=t.children),l.isNullOrUndef(t.className)||(e.className=t.className,delete t.className)),t.ref&&(e.ref=t.ref,
delete t.ref),l.isNullOrUndef(t.key)||(e.key=t.key,delete t.key)}function u(e){return"svg"===e?128:"input"===e?512:"select"===e?2048:"textarea"===e?1024:"media"===e?256:2}function c(e){var t=e.props,n=e.children;if(28&e.flags){var o=e.type,i=o.defaultProps;if(!l.isNullOrUndef(i))if(t)for(var r in i)l.isUndefined(t[r])&&(t[r]=i[r]);else t=e.props=i;l.isString(o)&&(e.flags=u(o),t&&t.children&&(e.children=t.children,n=t.children))}t&&(a(e,t,n),l.isInvalid(t.children)||(t.children=d(t.children))),l.isInvalid(n)||(e.children=d(n))}Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeVNodes=s,t.getFlagsForElementVnode=u,t.normalize=c}),C=n(function(e,t){function n(e,t){return{data:e,event:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.linkEvent=n}),E=n(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NO_OP=l.NO_OP,t.getFlagsForElementVnode=O.getFlagsForElementVnode,t.internal_normalize=O.normalize,t.options=s.options,t.cloneVNode=k.cloneVNode,t.createVNode=k.createVNode,t.internal_isUnitlessNumber=d.isUnitlessNumber,t.linkEvent=C.linkEvent,t.internal_patch=y.patch,t.internal_DOMNodeMap=g.componentToDOMNodeMap,t.createRenderer=g.createRenderer,t.findDOMNode=g.findDOMNode,t.render=g.render,t.EMPTY_OBJ=b.EMPTY_OBJ;t.version="3.0.4",t.default={getFlagsForElementVnode:O.getFlagsForElementVnode,linkEvent:C.linkEvent,createVNode:k.createVNode,cloneVNode:k.cloneVNode,NO_OP:l.NO_OP,EMPTY_OBJ:b.EMPTY_OBJ,render:g.render,findDOMNode:g.findDOMNode,createRenderer:g.createRenderer,options:s.options,version:"3.0.4",internal_patch:y.patch,internal_DOMNodeMap:g.componentToDOMNodeMap,internal_isUnitlessNumber:d.isUnitlessNumber,internal_normalize:O.normalize}}),U=n(function(e){e.exports=E.default,e.exports.default=e.exports}),x=U.render,M=n(function(e,t){function n(e,t){if(28&e.flags){var o=e.parentVNode;o&&(o.dom=t,n(o,t))}}function o(e,t,n){var o=s.get(e);void 0===o&&(o=[],s.set(e,o),d.then(function(){s.delete(e),e._updating=!0,r(e,t,function(){for(var e=0,t=o.length;e<t;e++)o[e]()}),e._updating=!1})),l.isNullOrUndef(n)||o.push(n)}function i(e,t,n){l.isFunction(t)&&(t=t(e.state,e.props,e.context));var i=e._pendingState;if(null===i)e._pendingState=i=t;else for(var s in t)i[s]=t[s];if(!l.isBrowser||e._pendingSetState||e._blockRender){var d=e.state;if(null===d)e.state=i;else for(var a in i)d[a]=i[a];e._pendingState=null,!l.isNullOrUndef(n)&&e._blockRender&&e._lifecycle.addListener(n.bind(e))}else e._updating?o(e,!1,n):(e._pendingSetState=!0,e._updating=!0,r(e,!1,n),e._updating=!1)}function r(e,t,o){if(!e._unmounted){if(t||!e._blockRender){e._pendingSetState=!1;var i=e._pendingState,r=e.state,s=l.combineFrom(r,i),d=e.props,a=e.context;e._pendingState=null;var u=e._updateComponent(r,s,d,d,a,t,!0),c=!0;l.isInvalid(u)?u=U.createVNode(4096,null):u===l.NO_OP?(u=e._lastInput,c=!1):l.isStringOrNumber(u)?u=U.createVNode(1,null,null,u):l.isArray(u)&&l.throwError();var p=e._lastInput,f=e._vNode,h=p.dom&&p.dom.parentNode||(p.dom=f.dom);if(e._lastInput=u,c){var m=void 0;l.isUndefined(e.getChildContext)||(m=e.getChildContext()),m=l.isNullOrUndef(m)?e._childContext:l.combineFrom(a,m);var v=e._lifecycle;U.internal_patch(p,u,h,v,m,e._isSVG,!1),v.trigger(),l.isUndefined(e.componentDidUpdate)||e.componentDidUpdate(d,r,a),l.isNull(U.options.afterUpdate)||U.options.afterUpdate(f)}var g=f.dom=u.dom;U.options.findDOMNodeEnabled&&U.internal_DOMNodeMap.set(e,u.dom),n(f,g)}else e.state=e._pendingState,e._pendingState=null;l.isNullOrUndef(o)||o.call(e)}}Object.defineProperty(t,"__esModule",{value:!0});var s=(l.ERROR_MSG,new Map),d=Promise.resolve(),a=function(){function e(e,t){this.state=null,this._blockRender=!1,this._blockSetState=!0,this._pendingSetState=!1,this._pendingState=null,this._lastInput=null,this._vNode=null,this._unmounted=!1,this._lifecycle=null,this._childContext=null,this._isSVG=!1,this._updating=!0,this.props=e||U.EMPTY_OBJ,this.context=t||U.EMPTY_OBJ}return e.prototype.forceUpdate=function(e){!this._unmounted&&l.isBrowser&&r(this,!0,e)},e.prototype.setState=function(e,t){this._unmounted||(this._blockSetState?l.throwError():i(this,e,t))},e.prototype.setStateSync=function(e){this.setState(e)},e.prototype._updateComponent=function(e,t,n,o,i,r,s){if(!0===this._unmounted&&l.throwError(),n!==o||o===U.EMPTY_OBJ||e!==t||r){if(n===o&&o!==U.EMPTY_OBJ||(l.isUndefined(this.componentWillReceiveProps)||s||(this._blockRender=!0,this.componentWillReceiveProps(o,i),this._blockRender=!1),this._pendingSetState&&(t=l.combineFrom(t,this._pendingState),this._pendingSetState=!1,this._pendingState=null)),l.isUndefined(this.shouldComponentUpdate)||this.shouldComponentUpdate(o,t,i)||r){l.isUndefined(this.componentWillUpdate)||(this._blockSetState=!0,this.componentWillUpdate(o,t,i),this._blockSetState=!1),this.props=o,this.state=t,this.context=i,U.options.beforeRender&&U.options.beforeRender(this);var d=this.render(o,t,i);return U.options.afterRender&&U.options.afterRender(this),d}this.props=o,this.state=t,this.context=i}return l.NO_OP},e.prototype.render=function(e,t,n){},e}();t.default=a}),P=n(function(e){e.exports=M.default,e.exports.default=e.exports}),S=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},w=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},V=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},D=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},A=U.createVNode,I=function(e){function t(){return S(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),w(t,[{key:"click",value:function(e){var t=this,n=function(){t.props.node.toggleCheck()};this.props.dom._tree.emit("node.click",e,this.props.node,n),e.treeDefaultPrevented||n()}},{key:"render",value:function(){var e=this;return A(512,"input",null,null,{checked:this.props.node.checked(),indeterminate:this.props.node.indeterminate(),onClick:this.click.bind(this),type:"checkbox"},null,function(t){return t.indeterminate=e.props.indeterminate})}}]),t}(P),F=U.createVNode,R=function(e){function t(){return S(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),w(t,[{key:"shouldComponentUpdate",value:function(){return!1}},{key:"add",value:function(e){e.stopPropagation(),this.props.node.addChild(o()),this.props.node.expand()}},{key:"edit",value:function(e){e.stopPropagation(),this.props.node.toggleEditing()}},{key:"remove",value:function(e){e.stopPropagation(),this.props.node.remove()}},{key:"render",value:function(){var e=[];return this.props.dom._tree.config.editing.edit&&e.push(F(2,"a","btn icon icon-pencil",null,{onclick:this.edit.bind(this),title:"Edit this node"})),this.props.dom._tree.config.editing.add&&e.push(F(2,"a","btn icon icon-plus",null,{onclick:this.add.bind(this),title:"Add a child node"})),this.props.dom._tree.config.editing.remove&&e.push(F(2,"a","btn icon icon-minus",null,{onclick:this.remove.bind(this),title:"Remove this node"})),F(2,"span","btn-group",e)}}]),t}(P),j=U.createVNode,B=function(e){function t(){return S(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),w(t,[{key:"render",value:function(){return j(2,"ol",null,j(2,"li","leaf",j(2,"span","title icon icon-file-empty empty",this.props.text)))}}]),t}(P),L=U.createVNode,$=function(e){function t(e){S(this,t);var n=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.getStateFromNodes(e.node),n}return V(t,e),w(t,[{key:"getStateFromNodes",value:function(e){return{text:e.text}}},{key:"componentWillReceiveProps",value:function(e){this.setState(this.getStateFromNodes(e.node))}},{key:"shouldComponentUpdate",value:function(e,t){return i(this.state,t)}},{key:"click",value:function(e){var t=this,n=function(){t.props.node.toggleCheck()};this.props.dom._tree.emit("node.click",e,this.props.node,n),e.treeDefaultPrevented||n()}},{key:"keypress",value:function(e){if(13===e.which)return this.save()}},{key:"input",value:function(e){this.setState({text:e.target.value})}},{key:"cancel",value:function(e){e&&e.stopPropagation(),this.props.node.toggleEditing()}},{key:"save",value:function(e){e&&e.stopPropagation(),this.props.node.set("text",this.ref.value),this.props.node.state("editing",!1),this.props.node.markDirty(),this.props.dom._tree.applyChanges()}},{key:"render",value:function(){var e=this;return L(2,"form",null,[L(512,"input",null,null,{onClick:function(e){return e.stopPropagation},onInput:this.input.bind(this),onKeyPress:this.keypress.bind(this),value:this.state.text},null,function(t){return e.ref=t}),L(2,"span","btn-group",[L(2,"button","btn icon icon-check",null,{onClick:this.save.bind(this),title:"Save",type:"button"}),L(2,"button","btn icon icon-cross",null,{onClick:this.cancel.bind(this),title:"Cancel",type:"button"})])],{onsubmit:function(e){return e.preventDefault}})}}]),t}(P),Y=U.createVNode,J=function(e){function t(){return S(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),w(t,[{key:"blur",value:function(){this.props.node.blur()}},{key:"click",value:function(e){var t=this,n=this.props,o=n.node,i=n.dom,r=function(){if(e.preventDefault(),!t.props.editing){if((e.metaKey||e.ctrlKey||e.shiftKey)&&i._tree.disableDeselection(),e.shiftKey){i.clearSelection();var n=i._tree.lastSelectedNode();n&&i._tree.selectBetween.apply(i._tree,i._tree.boundingNodes(n,o))}o.selected()?i._tree.config.selection.disableDirectDeselection||o.deselect():o.select(),i._tree.enableDeselection()}};i._tree.emit("node.click",e,o,r),e.treeDefaultPrevented||r()}},{key:"contextMenu",value:function(e){var t=this.props,n=t.node;t.dom._tree.emit("node.contextmenu",e,n)}},{key:"dblclick",value:function(e){var t=this.props,n=t.node,o=t.dom,i=function(){o.clearSelection(),n.toggleCollapse()};o._tree.emit("node.dblclick",e,n,i),e.treeDefaultPrevented||i()}},{key:"focus",value:function(e){this.props.node.focus(e)}},{key:"mousedown",value:function(){this.props.dom.isDragDropEnabled&&(this.props.dom.isMouseHeld=!0)}},{key:"render",value:function(){var e=this.props.node,t=e.itree.a.attributes||{};if(t.className="title icon",t.tabindex=1,t.unselectable="on",!this.props.dom.config.showCheckboxes){var n=this.props.expanded?"icon-folder-open":"icon-folder";t.className+=" "+(e.itree.icon||(this.props.hasOrWillHaveChildren?n:"icon-file-empty"))}var o=e.text;return e.editing()&&(o=Y(16,$,null,null,{dom:this.props.dom,node:this.props.node})),Y(2,"a",null,o,T({onBlur:this.blur.bind(this),onClick:this.click.bind(this),onContextMenu:this.contextMenu.bind(this),onDblClick:this.dblclick.bind(this),onFocus:this.focus.bind(this),onMouseDown:this.mousedown.bind(this)},t))}}]),t}(P),W=U.createVNode,K=function(e){function t(){return S(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),w(t,[{key:"className",value:function(){return"toggle icon "+(this.props.collapsed?"icon-expand":"icon-collapse")}},{key:"render",value:function(){return W(2,"a",this.className(),null,{onClick:this.props.node.toggleCollapse.bind(this.props.node)})}}]),t}(P),H=U.createVNode,z=function(e){function t(e){S(this,t);var n=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.stateFromNode(e.node),n}return V(t,e),w(t,[{key:"stateFromNode",value:function(e){return{dirty:e.itree.dirty}}},{key:"componentWillReceiveProps",value:function(e){this.setState(this.stateFromNode(e.node))}},{key:"shouldComponentUpdate",value:function(e,t){return t.dirty}},{key:"getClassNames",value:function(){var e=this.props.node,t=e.itree.state,n=e.itree.li.attributes,o=[];_.each(Object.keys(t),function(e){t[e]&&o.push(e)}),!e.hidden()&&e.removed()&&o.push("hidden"),e.expanded()&&o.push("expanded"),o.push(e.children?"folder":"leaf");var i=n.class||n.className;return _.isFunction(i)&&(i=i(e)),_.isEmpty(i)||(_.isString(i)?o=o.concat(i.split(/[\s\.]+/)):_.isArray(i)&&(o=o.concat(i))),o.join(" ")}},{key:"getAttributes",value:function(){var e=this.props.node,t=_.clone(e.itree.li.attributes)||{};return t.className=this.getClassNames(),t["data-uid"]=e.id,t}},{key:"renderCheckbox",value:function(){var e=this.props.node;if(this.props.dom.config.showCheckboxes)return H(16,I,null,null,{checked:e.checked(),dom:this.props.dom,indeterminate:e.indeterminate(),node:e})}},{key:"renderChildren",value:function(){var e=this.props,t=e.node,n=e.dom;if(t.hasChildren()){var o=t.children,i=n.loading,r=o.pagination();return H(16,q,null,null,{context:t,dom:n,limit:r.limit,loading:i,nodes:o,total:r.total})}if(this.props.dom.isDynamic&&t.children)return t.hasLoadedChildren()?H(16,B,null,null,{text:"No Results"}):H(16,B,null,null,{text:"Loading..."})}},{key:"renderEditToolbar",value:function(){if(this.props.dom._tree.config.editing.edit&&!this.props.node.editing())return H(16,R,null,null,{dom:this.props.dom,node:this.props.node})}},{key:"renderToggle",value:function(){var e=this.props.node;if(this.props.dom.isDynamic?Boolean(e.children):e.hasVisibleChildren())return H(16,K,null,null,{collapsed:e.collapsed(),node:e})}},{key:"render",value:function(){var e=this,t=this.props.node,n=H(2,"li",null,[this.renderEditToolbar(),H(2,"div","title-wrap",[this.renderToggle(),this.renderCheckbox(),H(16,J,null,null,{dom:this.props.dom,editing:t.editing(),expanded:t.expanded(),hasOrWillHaveChildren:Boolean(t.children),node:t,text:t.text})]),H(2,"div","wholerow"),this.renderChildren()],T({},this.getAttributes()),null,function(t){return e.props.node.itree.ref=t});return this.props.node.state("rendered",!0),this.props.node.itree.dirty=!1,n}}]),t}(P),G=U.createVNode,q=function(e){function t(){return S(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),w(t,[{key:"shouldComponentUpdate",value:function(e){return _.find(e.nodes,"itree.dirty")||i(this.props,e)}},{key:"isDeferred",value:function(){return this.props.dom.config.deferredRendering||this.props.dom._tree.config.deferredLoading}},{key:"loadMore",value:function(e){e.preventDefault(),this.props.dom._tree.loadMore(this.props.context,e)}},{key:"renderLoadMoreNode",value:function(){return G(2,"li","leaf detached",G(2,"a","title icon icon-more load-more","Load More",{onClick:this.loadMore.bind(this)}))}},{key:"renderLoadingTextNode",value:function(){return G(2,"li","leaf",G(2,"span","title icon icon-more","Loading..."))}},{key:"render",value:function(){var e=this,t=this.props.nodes,n=t.pagination();this.props.dom.config.deferredRendering&&(t=_.slice(this.props.nodes,0,n.limit));var o=_.map(t,function(t){return G(16,z,null,null,{dom:e.props.dom,node:t},t.id)});return this.isDeferred()&&n.limit<n.total&&(this.props.loading?o.push(this.renderLoadingTextNode()):o.push(this.renderLoadMoreNode())),G(2,"ol",null,[o,this.props.children])}}]),t}(P),X=U.createVNode,Q=function(e){function t(){return S(this,t),D(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return V(t,e),w(t,[{key:"add",value:function(){this.props.dom._tree.focused().blur(),this.props.dom._tree.addNode(o())}},{key:"renderAddLink",value:function(){if(this.props.dom._tree.config.editing.add)return X(2,"li",null,X(2,"a","btn icon icon-plus",null,{onClick:this.add.bind(this),title:"Add a new root node"}))}},{key:"render",value:function(){var e=this.props,t=e.dom,n=e.nodes,o=t.loading,i=n.pagination();return X(16,q,null,null,{dom:t,limit:i.limit,loading:o,nodes:n,total:i.total,children:this.renderAddLink()})}}]),t}(P),Z=U.createVNode;return function(){function n(o,i){var r=this;if(S(this,n),!(o instanceof t))throw new TypeError("Tree argument is not an InspireTree instance.");if(this._tree=o,this.batching=0,this.dropTargets=[],this.$scrollLayer,!i.target)throw new TypeError("Invalid `target` property - must be a selector, HTMLElement, or jQuery element.");o.usesNativeDOM=!0,this.config=e.defaults({},i,{autoLoadMore:!0,deferredRendering:!1,dragTargets:!1,nodeHeight:25,showCheckboxes:!1,tabindex:-1,target:!1}),"checkbox"!==o.config.selection.mode||e.isBoolean(e.get(i,"showCheckboxes"))||(this.config.showCheckboxes=!0),this.isDynamic=e.isFunction(this._tree.config.data),this.attach(this.config.target);var l=!0;o.on("changes.applied",function(){r.renderNodes(),l&&(r.scrollSelectedIntoView(),l=!1)}),this.renderNodes()}return w(n,[{key:"attach",value:function(t){var n=this;if(this.$target=this.getElement(t),this.$scrollLayer=this.getScrollableAncestor(this.$target),!this.$target)throw new Error("No valid element to attach to.");var o=this.$target.className.split(" ");o.push("inspire-tree"),this._tree.config.editable&&(o.push("editable"),e.each(e.pickBy(this._tree.config.editing,e.identity),function(e,t){o.push("editable-"+t)})),this.$target.className=o.join(" "),this.$target.setAttribute("tabindex",this.config.tabindex||0),this.$target.addEventListener("keyup",this.keyboardListener.bind(this));var i=this.config.dragTargets;if(e.isEmpty(i)||e.each(i,function(e){var t=n.getElement(e);if(!t)throw new Error("No valid element found for drop target "+e);n.dropTargets.push(t)}),this.isDragDropEnabled=this.dropTargets.length>0,this.isDragDropEnabled&&(document.addEventListener("mouseup",this.mouseUpListener.bind(this)),document.addEventListener("mousemove",this.mouseMoveListener.bind(this))),this._tree.on("node.focused",function(e){var t=e.itree.ref.querySelector(".title");t!==document.activeElement&&t.focus()}),this.config.deferredRendering||this._tree.config.deferredLoading){var r=this._tree.config.pagination.limit;this._tree.config.pagination.limit=r>0?r:e.ceil(this.$scrollLayer.clientHeight/this.config.nodeHeight),this.config.autoLoadMore&&this.$target.addEventListener("scroll",e.throttle(this.scrollListener.bind(this),20))}this.$target.inspireTree=this._tree}},{key:"clearSelection",value:function(){document.selection&&document.selection.empty?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges()}},{key:"createDraggableElement",value:function(e,t){this.$dragNode=this.nodeFromTitleDOMElement(e);var n=e.getBoundingClientRect(),o=t.clientX-n.left,i=t.clientY-n.top;this.dragHandleOffset={left:o,top:i},this.$dragElement=e.cloneNode(!0),this.$dragElement.className+=" dragging",this.$dragElement.style.top=n.top+"px",this.$dragElement.style.left=n.left+"px",this.$target.appendChild(this.$dragElement)}},{key:"getElement",value:function(t){var n=void 0;if(t instanceof HTMLElement)n=t;else if(e.isObject(t)&&e.isObject(t[0]))n=t[0];else if(e.isString(t)){var o=document.querySelector(t);o&&(n=o)}return n}},{key:"getScrollableAncestor",value:function(e){if(e instanceof Element){"auto"!==getComputedStyle(e).overflow&&e.parentNode&&(e=this.getScrollableAncestor(e.parentNode))}return e}},{key:"keyboardListener",value:function(e){var t=this._tree.focused();if(t)switch(t=t[0],e.which){case 40:this.moveFocusDownFrom(t);break;case 13:t.toggleSelect();break;case 37:t.collapse();break;case 39:t.expand();break;case 38:this.moveFocusUpFrom(t)}}},{key:"mouseMoveListener",value:function(t){if(this.isMouseHeld&&!this.$dragElement)this.createDraggableElement(t.target,t);else if(this.$dragElement){t.preventDefault(),t.stopPropagation();var n=t.clientX-this.dragHandleOffset.left,o=t.clientY-this.dragHandleOffset.top;this.$dragElement.style.left=n+"px",this.$dragElement.style.top=o+"px";var i=void 0;e.each(this.dropTargets,function(e){var n=e.getBoundingClientRect();if(t.clientX>=n.left&&t.clientX<=n.right&&t.clientY>=n.top&&t.clientY<=n.bottom)return i=e,!1}),!this.$activeDropTarget&&i&&-1===i.className.indexOf("itree-active-drop-target")&&(i.className+=" itree-active-drop-target"),this.$activeDropTarget=i}}},{key:"mouseUpListener",value:function(){if(this.isMouseHeld=!1,this.$dragElement&&(this.$dragElement.parentNode.removeChild(this.$dragElement),this.$activeDropTarget)){var t=e.isFunction(e.get(this.$activeDropTarget,"inspireTree.addNode"));if(this._tree.emit("node.dropout",this.$dragNode,this.$activeDropTarget,t),t){var n=this.$activeDropTarget.inspireTree.addNode(this.$dragNode.copyHierarchy().toObject());this.$activeDropTarget.inspireTree.emit("node.dropin",n)}}this.$activeDropTarget&&(this.$activeDropTarget.className=this.$activeDropTarget.className.replace("itree-active-drop-target","")),this.$dragNode=null,this.$dragElement=null,this.$activeDropTarget=null}},{key:"moveFocusDownFrom",value:function(e){var t=e.nextVisibleNode();t&&t.focus()}},{key:"moveFocusUpFrom",value:function(e){var t=e.previousVisibleNode();t&&t.focus()}},{key:"nodeFromTitleDOMElement",value:function(e){var t=e.parentNode.parentNode.getAttribute("data-uid");return this._tree.node(t)}},{key:"renderNodes",value:function(e){x(Z(16,Q,null,null,{dom:this,nodes:e||this._tree.nodes()}),this.$target)}},{key:"scrollListener",value:function(t){var n=this;if(!this.rendering&&!this.loading){var o=this.$scrollLayer.getBoundingClientRect(),i=document.querySelectorAll(".load-more");e.each(i,function(e){var i=e.getBoundingClientRect();if(!(o.right<i.left||o.left>i.right||o.bottom<i.top||o.top>i.bottom)){var r=void 0,l=e.parentNode.parentNode.parentNode;"LI"===l.tagName&&(r=n._tree.node(l.getAttribute("data-uid"))),n._tree.loadMore(r,t)}})}}},{key:"scrollSelectedIntoView",value:function(){var e=this.$target.querySelector(".selected");e&&this.$scrollLayer&&(this.$scrollLayer.scrollTop=e.offsetTop)}}]),n}()});
